<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>管理者ログイン</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h1>管理者ログイン</h1>

<input id="pass" type="password" placeholder="パスワード">
<button id="login">ログイン</button>

<p id="msg"></p>

<script>
document.getElementById("login").onclick = async () => {
  const pass = document.getElementById("pass").value;
  const msg = document.getElementById("msg");

  try {
    const res = await fetch("/api/admin/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ pass })
    });

    if (!res.ok) {
      msg.textContent = "パスワードが違います";
      return;
    }

    const data = await res.json();

    if (data.result === "ok") {
      sessionStorage.setItem("ADMIN_LOGIN", "YES");
      location.href = "admin.html";
    }
  } catch (e) {
    msg.textContent = "通信エラー";
  }
};
</script>

</body>
</html>
