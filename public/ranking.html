<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ランキング</title>
</head>
<body>

<h1>ランキング</h1>

<input id="name" placeholder="名前">
<button id="send">送信</button>

<h2>上位10位</h2>
<div id="list"></div>

<script>
async function load() {
  const res = await fetch('/api/ranking');
  const data = await res.json();

  document.getElementById('list').innerHTML =
    data.map(x => `${x.name}：${x.score}点`).join("<br>");
}
load();

document.getElementById('send').addEventListener('click', async () => {
  const name = document.getElementById('name').value;
  const score = Number(localStorage.getItem('score'));

  await fetch('/api/submit', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ name, score })
  });

  alert("登録しました");
  load();
});
</script>

<a href="index.html">戻る</a>

</body>
</html>
