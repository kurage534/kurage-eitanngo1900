<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>管理者ページ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>管理者ページ</h1>

<p>ランキングデータを全削除できます</p>

<input id="pass" type="password" placeholder="管理パスワード">
<button id="deleteBtn">ランキング削除</button>

<div id="msg"></div>

<script>
document.getElementById('deleteBtn').addEventListener('click', async () => {
  const pass = document.getElementById('pass').value.trim();
  const msg = document.getElementById('msg');

  msg.textContent = "";

  try {
    const res = await fetch("/api/admin/delete", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ pass })
    });

    const result = await res.json();

    if (!res.ok) {
      msg.style.color = "red";
      msg.textContent = result.error || "エラーが発生しました";
      return;
    }

    msg.style.color = "green";
    msg.textContent = "ランキングを削除しました！";

  } catch {
    msg.style.color = "red";
    msg.textContent = "通信エラーです";
  }
});
</script>

</body>
</html>
